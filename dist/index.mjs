import v from"fs";var m={allReplace:!1,unitToConvert:"px",viewportWidth:750,unitPrecision:5,viewportUnit:"vw",fontViewportUnit:"vw",minPixelValue:1,attributeList:[]};function S(e,l){let u=Math.pow(10,l+1),s=Math.floor(e*u);return Math.round(s/10)*10/u}function w(e,l,u,s){return function(t,y){if(y=Number(y),!y)return t;let i=parseFloat(y);return i<=l?t:S(i/e*100,u)+s}}var P=m,b=/<template>([\s\S]+)<\/template>/gi,g=/(\d+)px/g,R=/style\s*(:|=)\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,j=/(\w+)=\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,V=/style.setProperty\(.*\)/g,x=(e,l,u)=>{if(Array.isArray(l)&&l.length){for(let s=0;s<l.length;s++){let t=e,y=l[s],i=new RegExp(`${y}s*(:|=)s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})`,"g"),f=e.match(i);if(f?.length){let n=[];for(let a=0;a<f.length;a++){let o=f[a].replace(g,h=>h.replace(g,w(u.viewportWidth,u.minPixelValue,u.unitPrecision,u.viewportUnit)));n.push(o)}let p=e;for(let a=0;a<f.length;a++)p=p.replace(f[a],`${n[a]}`);e=e.replace(t,p)}}return e}else return e};function N(e=m){let l=Object.assign({},m);e=Object.assign(l,e);try{v.writeFileSync(process.cwd()+"/node_modules/vite-plugin-style-to-vw/dist/file.json",JSON.stringify(e),"utf8")}catch{}let u=e.allReplace,s=u?j:R;return{name:"vite-plugin-style-to-vw",enforce:"pre",transform(t,y){if(/.vue$/.test(y)){let i="",f="";if(b.test(t)?(i=t.match(b)[0],f=t.match(b)[0]):t.includes("setup")&&(i=t,f=t),s.test(i)){let n=i.match(s);if(n?.length){let p=[];for(let r=0;r<n.length;r++){let h=n[r].replace(g,c=>c.replace(g,w(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));p.push(h)}let a=i;for(let r=0;r<n.length;r++)a=a.replace(n[r],`${p[r]}`);t=t.replace(f,a)}}u||(t=x(t,e.attributeList,e))}else if(/\.tsx|\.jsx$/.test(y)){let i=t,f=t;if(s.test(i)){let n=i.match(s);if(n?.length){let p=[];for(let r=0;r<n.length;r++){let h=n[r].replace(g,c=>c.replace(g,w(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));p.push(h)}let a=i;for(let r=0;r<n.length;r++)a=a.replace(n[r],`${p[r]}`);t=t.replace(f,a),f=t,i=t}}if(u||(t=x(t,e.attributeList,e)),V.test(i)){let n=i.match(V);if(n?.length){let p=[];for(let r=0;r<n.length;r++){let h=n[r].replace(g,c=>c.replace(g,w(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));p.push(h)}let a=i;for(let r=0;r<n.length;r++)a=a.replace(n[r],`${p[r]}`);t=t.replace(t,a)}}}return{code:t,map:null}}}}var U=N;if(typeof window<"u")try{P=(await import("/node_modules/vite-plugin-style-to-vw/dist/file.json")).default}catch{}var W=(e,l={})=>{let u=Object.assign({},P);if(l=Object.assign(u,l),typeof e=="number"||typeof Number(e)=="number"&&!isNaN(Number(e))){let s=e.toString().replace(/(\d+)/g,t=>t.replace(/(\d+)/g,w(l.viewportWidth,l.minPixelValue,l.unitPrecision,"")));return typeof e=="number"?Number(s):s}else return e.toString().replace(g,s=>s.replace(g,w(l.viewportWidth,l.minPixelValue,l.unitPrecision,l.viewportUnit)))};export{U as default,W as stylePxToVw};
