import S from"fs";var x={allReplace:!1,unitToConvert:"px",viewportWidth:750,unitPrecision:5,viewportUnit:"vw",fontViewportUnit:"vw",minPixelValue:1,attributeList:[]};function R(e,l){let u=Math.pow(10,l+1),s=Math.floor(e*u);return Math.round(s/10)*10/u}function h(e,l,u,s){return function(t,g){if(g=Number(g),!g)return t;let a=parseFloat(g);return a<=l?t:R(a/e*100,u)+s}}var b=x,V=/<template>([\s\S]+)<\/template>/gi,y=/(\d+)px/g,m=/style\s*(:|=)\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,j=/(\w+)=\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,P=/style.setProperty\(.*\)/g,v=(e,l,u)=>{if(Array.isArray(l)&&l.length){for(let s=0;s<l.length;s++){let t=e,g=l[s],a=new RegExp(`${g}s*(:|=)s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})`,"g"),p=e.match(a);if(p?.length){let n=[];for(let i=0;i<p.length;i++){let o=p[i].replace(y,c=>c.replace(y,h(u.viewportWidth,u.minPixelValue,u.unitPrecision,u.viewportUnit)));n.push(o)}let f=e;for(let i=0;i<p.length;i++)f=f.replace(p[i],`${n[i]}`);e=e.replace(t,f)}}return e}else return e};function N(e=x){let l=Object.assign({},x);e=Object.assign(l,e);try{S.writeFileSync(process.cwd()+"/node_modules/vite-plugin-style-to-vw/dist/file.json",JSON.stringify(e),"utf8")}catch{}let s=e.allReplace?j:m;return{name:"vite-plugin-style-to-vw",enforce:"pre",transform(t,g){if(/.vue$/.test(g)){let a="",p="";if(V.test(t)?(a=t.match(V)[0],p=t.match(V)[0]):t.includes("setup")&&(a=t,p=t),s.test(a)){let n=a.match(s);if(n?.length){let f=[];for(let r=0;r<n.length;r++){let c=n[r].replace(y,w=>w.replace(y,h(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));f.push(c)}let i=a;for(let r=0;r<n.length;r++)i=i.replace(n[r],`${f[r]}`);t=t.replace(p,i)}t=v(t,e.attributeList,e)}}else if(/\.tsx|\.jsx$/.test(g)){let a=t,p=t;if(s.test(a)){let n=a.match(s);if(n?.length){let f=[];for(let r=0;r<n.length;r++){let c=n[r].replace(y,w=>w.replace(y,h(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));f.push(c)}let i=a;for(let r=0;r<n.length;r++)i=i.replace(n[r],`${f[r]}`);t=t.replace(p,i),p=t,a=t}t=v(t,e.attributeList,e)}if(P.test(a)){let n=a.match(P);if(n?.length){let f=[];for(let r=0;r<n.length;r++){let c=n[r].replace(y,w=>w.replace(y,h(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));f.push(c)}let i=a;for(let r=0;r<n.length;r++)i=i.replace(n[r],`${f[r]}`);t=t.replace(t,i)}}}return{code:t,map:null}}}}var U=N;if(typeof window<"u")try{b=(await import("/node_modules/vite-plugin-style-to-vw/dist/file.json")).default}catch{}var W=(e,l={})=>{let u=Object.assign({},b);if(l=Object.assign(u,l),typeof e=="number"||typeof Number(e)=="number"&&!isNaN(Number(e))){let s=e.toString().replace(/(\d+)/g,t=>t.replace(/(\d+)/g,h(l.viewportWidth,l.minPixelValue,l.unitPrecision,"")));return typeof e=="number"?Number(s):s}else return e.toString().replace(y,s=>s.replace(y,h(l.viewportWidth,l.minPixelValue,l.unitPrecision,l.viewportUnit)))};export{U as default,W as stylePxToVw};
