import v from"fs";var o={allReplace:!1,unitToConvert:"px",viewportWidth:750,unitPrecision:5,viewportUnit:"vw",fontViewportUnit:"vw",minPixelValue:1};function b(e,i){let a=Math.pow(10,i+1),r=Math.floor(e*a);return Math.round(r/10)*10/a}function w(e,i,a,r){return function(y,l){if(l=Number(l),!l)return y;let u=parseFloat(l);return u<=i?y:b(u/e*100,a)+r}}var x=o,h=/<template>([\s\S]+)<\/template>/gi,f=/(\d+)px/g,S=/style\s*(:|=)\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,m=/(\w+)=\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,V=/style.setProperty\(.*\)/g;function R(e=o){e=Object.assign(o,e);try{v.writeFileSync(__dirname+"/file.json",JSON.stringify(e),"utf8")}catch{}let a=e.allReplace?m:S;return{name:"vite-plugin-style-to-vw",enforce:"pre",transform(r,y){if(/.vue$/.test(y)){let l="",u="";if(h.test(r)?(l=r.match(h)[0],u=r.match(h)[0]):r.includes("setup")&&(l=r,u=r),a.test(l)){let n=l.match(a);if(n?.length){let p=[];for(let t=0;t<n.length;t++){let g=n[t].replace(f,c=>c.replace(f,w(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));p.push(g)}let s=l;for(let t=0;t<n.length;t++)s=s.replace(n[t],`${p[t]}`);r=r.replace(u,s)}}}else if(/\.tsx|\.jsx$/.test(y)){let l=r,u=r;if(a.test(l)){let n=l.match(a);if(n?.length){let p=[];for(let t=0;t<n.length;t++){let g=n[t].replace(f,c=>c.replace(f,w(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));p.push(g)}let s=l;for(let t=0;t<n.length;t++)s=s.replace(n[t],`${p[t]}`);r=r.replace(u,s),u=r,l=r}}if(V.test(l)){let n=l.match(V);if(n?.length){let p=[];for(let t=0;t<n.length;t++){let g=n[t].replace(f,c=>c.replace(f,w(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));p.push(g)}let s=l;for(let t=0;t<n.length;t++)s=s.replace(n[t],`${p[t]}`);r=r.replace(r,s)}}}return{code:r,map:null}}}}var M=R;if(typeof window<"u")try{x=await import("vite-plugin-style-to-vw/dist/file.json")}catch{}var U=(e,i={})=>{if(i=Object.assign(x,i),typeof e=="number"||typeof Number(e)=="number"&&!isNaN(Number(e))){let a=e.toString().replace(/(\d+)/g,r=>r.replace(/(\d+)/g,w(i.viewportWidth,i.minPixelValue,i.unitPrecision,"")));return typeof e=="number"?Number(a):a}else return e.toString().replace(f,a=>a.replace(f,w(i.viewportWidth,i.minPixelValue,i.unitPrecision,i.viewportUnit)))};export{M as default,U as stylePxToVw};
