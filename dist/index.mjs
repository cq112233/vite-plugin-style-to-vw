import S from"fs";var x={allReplace:!1,unitToConvert:"px",viewportWidth:750,unitPrecision:5,viewportUnit:"vw",fontViewportUnit:"vw",minPixelValue:1,attributeList:[]};function R(e,l){let u=Math.pow(10,l+1),s=Math.floor(e*u);return Math.round(s/10)*10/u}function c(e,l,u,s){return function(t,g){if(g=Number(g),!g)return t;let i=parseFloat(g);return i<=l?t:R(i/e*100,u)+s}}var v=x,V=/<template>([\s\S]+)<\/template>/gi,y=/(\d+)px/g,m=/style\s*(:|=)\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,j=/(\w+)=\s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})/g,P=/style.setProperty\(.*\)/g,b=(e,l,u)=>{if(Array.isArray(l)&&l.length){for(let s=0;s<l.length;s++){let t=e,g=l[s],i=new RegExp(`${g}s*(:|=)s*(?:"([^"]*?)"|'([^']*?)'|{([^}]*)})`,"g"),p=e.match(i);if(p?.length){let n=[];for(let a=0;a<p.length;a++){let o=p[a].replace(y,h=>h.replace(y,c(u.viewportWidth,u.minPixelValue,u.unitPrecision,u.viewportUnit)));n.push(o)}let f=e;for(let a=0;a<p.length;a++)f=f.replace(p[a],`${n[a]}`);e=e.replace(t,f)}}return console.log("code",e),e}else return e};function N(e=x){let l=Object.assign({},x);e=Object.assign(l,e);try{S.writeFileSync(__dirname+"/file.json",JSON.stringify(e),"utf8")}catch{}let s=e.allReplace?j:m;return{name:"vite-plugin-style-to-vw",enforce:"pre",transform(t,g){if(/.vue$/.test(g)){let i="",p="";if(V.test(t)?(i=t.match(V)[0],p=t.match(V)[0]):t.includes("setup")&&(i=t,p=t),s.test(i)){let n=i.match(s);if(n?.length){let f=[];for(let r=0;r<n.length;r++){let h=n[r].replace(y,w=>w.replace(y,c(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));f.push(h)}let a=i;for(let r=0;r<n.length;r++)a=a.replace(n[r],`${f[r]}`);t=t.replace(p,a)}t=b(t,e.attributeList,e)}}else if(/\.tsx|\.jsx$/.test(g)){let i=t,p=t;if(s.test(i)){let n=i.match(s);if(n?.length){let f=[];for(let r=0;r<n.length;r++){let h=n[r].replace(y,w=>w.replace(y,c(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));f.push(h)}let a=i;for(let r=0;r<n.length;r++)a=a.replace(n[r],`${f[r]}`);t=t.replace(p,a),p=t,i=t}t=b(t,e.attributeList,e)}if(P.test(i)){let n=i.match(P);if(n?.length){let f=[];for(let r=0;r<n.length;r++){let h=n[r].replace(y,w=>w.replace(y,c(e.viewportWidth,e.minPixelValue,e.unitPrecision,e.viewportUnit)));f.push(h)}let a=i;for(let r=0;r<n.length;r++)a=a.replace(n[r],`${f[r]}`);t=t.replace(t,a)}}}return{code:t,map:null}}}}var U=N;if(typeof window<"u")try{v=(await import("./file-33WK6AKK.mjs")).default}catch{}var W=(e,l={})=>{let u=Object.assign({},v);if(l=Object.assign(u,l),typeof e=="number"||typeof Number(e)=="number"&&!isNaN(Number(e))){let s=e.toString().replace(/(\d+)/g,t=>t.replace(/(\d+)/g,c(l.viewportWidth,l.minPixelValue,l.unitPrecision,"")));return typeof e=="number"?Number(s):s}else return e.toString().replace(y,s=>s.replace(y,c(l.viewportWidth,l.minPixelValue,l.unitPrecision,l.viewportUnit)))};export{U as default,W as stylePxToVw};
